webpackJsonp([7],{GF4k:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("mtWM"),s=r.n(o),i={name:"login",data:function(){var e=this;return{identifyCodes:"1234567890",identifyCode:"",ruleForm:{userName:"",password:"",validateCode:""},rules:{userName:[{validator:function(e,t,r){if(""===t)return r(new Error("账号不能为空"));r()},trigger:"blur"}],password:[{validator:function(e,t,r){""===t?r(new Error("请输入密码")):r()},trigger:"blur"}],validateCode:[{validator:function(t,r,o){r!==e.identifyCode?o(new Error("请输入正确的验证码")):o()},trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message.error("登录失败"),!1;sessionStorage.setItem("ms_username",t.ruleForm.userName),s.a.get("/api/user/login",{params:{userName:t.ruleForm.userName,password:t.ruleForm.password}}).then(function(e){console.log(e),1==e.data.state?(t.$router.push({path:"/monitor"}),t.$message({message:"登陆成功",type:"success"})):1!==e.data.state&&t.$message({message:"账号或密码错误,请重新输入",type:"error"})})})},resetForm:function(e){this.$refs[e].resetFields()},registForm:function(){this.$router.push("/register")},randomNum:function(e,t){return Math.floor(Math.random()*(t-e)+e)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(e,t){for(var r=0;r<t;r++)this.identifyCode+=this.identifyCodes[this.randomNum(0,this.identifyCodes.length)];console.log(this.identifyCode)}},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},beforeDestroy:function(){document.querySelector("body").removeAttribute("style")}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"img"}},[r("div",{staticClass:"ms-title"},[e._v("实验室环境监测系统")]),e._v(" "),r("div",{staticClass:"ms-login"},[r("div",{staticClass:"login"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[r("el-form-item",{attrs:{prop:"userName"}},[r("el-input",{attrs:{placeholder:"请输入账号",autocomplete:"off",clearable:""},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),r("br"),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码",type:"password",autocomplete:"off","show-password":"",clearable:""},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),r("br"),e._v(" "),r("el-form-item",{attrs:{prop:"validateCode"}},[r("el-input",{staticClass:"validate-code",attrs:{placeholder:"验证码"},model:{value:e.ruleForm.validateCode,callback:function(t){e.$set(e.ruleForm,"validateCode",t)},expression:"ruleForm.validateCode"}}),e._v(" "),r("div",{staticClass:"code",on:{click:e.refreshCode}},[r("s-identify",{attrs:{identifyCode:e.identifyCode}})],1)],1),r("br"),e._v(" "),r("div",{staticClass:"site"},[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登陆")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")]),e._v(" "),r("el-button",{on:{click:function(t){return e.registForm("ruleForm")}}},[e._v("注册")])],1)],1)],1)],1)]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"master"}},[t("div",{staticStyle:{width:"300px",margin:"0 auto",padding:"20px 0","margin-left":"-150px"}},[t("a",{staticStyle:{display:"inline-block","text-decoration":"none",height:"20px","line-height":"20px"},attrs:{target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41102402000277"}},[t("img",{staticStyle:{float:"left"},attrs:{src:"请将备案图标链接放置此处"}}),this._v(" "),t("p",{staticStyle:{float:"left",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#939393"}},[this._v("闽ICP备2021016906号")])])])])}]};var n=r("VU/8")(i,a,!1,function(e){r("yqhV")},"data-v-b0c754a8",null);t.default=n.exports},yqhV:function(e,t){}});
//# sourceMappingURL=7.fe50543baec1a5d0c3b0.js.map