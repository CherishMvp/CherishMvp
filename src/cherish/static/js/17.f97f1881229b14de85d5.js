webpackJsonp([17],{"6XLX":function(e,t){},w7hr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("mtWM"),n=a.n(l),o={data:function(){return{dialogFormVisible:!1,formLabelWidth:"80px",dialogVisible:!1,dialogVisible1:!1,form:{},tableDataBegin:[],tableDataName:"",tableDataEnd:[],currentPage:1,pageSize:4,totalItems:10,filterTableDataEnd:[],flag:!1}},handleSelectionChange:function(e){this.users.id=e,console.log("选中的数据集合为:",e)},created:function(){},mounted:function(){this.querry()},computed:{username:function(){var e=sessionStorage.getItem("ms_username");return console.log(e),"test"!==e&&alert("11"),e||this.name}},methods:{querry:function(){var e=this;n.a.get("api/user/list").then(function(t){if(console.log(t),e.tableDataBegin=t.data,console.log(e.tableDataEnd),e.totalItems=e.tableDataBegin.length,e.totalItems>e.pageSize)for(var a=0;a<e.pageSize;a++)e.tableDataEnd.push(e.tableDataBegin[a]);else e.tableDataEnd=e.tableDataBegin})},add:function(){this.form={id:"",userName:"",password:"",address:""},this.dialogFormVisible=!0},update:function(){console.log(this.form.id),console.log(this.form.userName),console.log(this.form.password),console.log(this.form.tel);var e=this;n.a.post("/api/user/up",{id:this.bookid,password:this.form.password,tel:this.form.tel,userName:this.form.userName}).then(function(t){if(console.log(t.data),0==t.data.state){var a=e.$loading({lock:!0,text:"修改成功",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){a.close()},1500)}}).catch(function(e){console.log(e)}),this.dialogFormVisible=!1},handleEdit:function(e,t){this.form=this.tableDataEnd[e],this.currentIndex=e,this.dialogFormVisible=!0},handleDelete:function(e,t){var a=this;this.$confirm("永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableDataEnd.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},load:function(){var e=this,t=this.$loading({lock:!0,text:"等待跳转",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});setTimeout(function(){t.close(),e.querry()},3e3)},deleteRow:function(e){var t=this;if(console.log(e),1==confirm("确定要删除吗")){n.a.post("/api/user/del",{id:e}).then(function(e){t.load(),console.log(e.data),t.querry()}).catch(function(e){console.log("失败了"+e)})}},cancel:function(){this.dialogFormVisible=!1},doFilter:function(){var e=this;""!=this.tableDataName?(this.tableDataEnd=[],this.filterTableDataEnd=[],this.tableDataBegin.forEach(function(t,a){t.userName&&t.userName.indexOf(e.tableDataName)>=0&&e.filterTableDataEnd.push(t)}),this.currentPage=1,this.totalItems=this.filterTableDataEnd.length,this.currentChangePage(this.filterTableDataEnd),this.flag=!0):this.$message.warning("查询条件不能为空！")},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){console.log("当前页: "+e),this.currentPage=e,this.flag?(this.currentChangePage(this.filterTableDataEnd),console.log(this.tableDataEnd)):(this.currentChangePage(this.tableDataBegin),console.log(this.tableDataEnd))},currentChangePage:function(e){var t=(this.currentPage-1)*this.pageSize,a=this.currentPage*this.pageSize;for(this.tableDataEnd=[];t<a;t++)e[t]&&this.tableDataEnd.push(e[t])}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"top"},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入姓名"},model:{value:e.tableDataName,callback:function(t){e.tableDataName=t},expression:"tableDataName"}}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doFilter}},[e._v("搜索")]),e._v(" "),a("div",{staticClass:"space"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableDataEnd,border:""}},[a("el-table-column",{attrs:{prop:"id",sortable:"",label:"序号",width:"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",sortable:"",label:"用户名",width:"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"password",sortable:"",label:"密码","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tel",sortable:"",label:"电话","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){return e.deleteRow(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"space"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[1,2,3,4],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalItems},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"用户信息",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"id","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"","auto-complete":"off"},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电话","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("确 定")])],1)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(o,i,!1,function(e){a("6XLX")},"data-v-414dfbf0",null);t.default=s.exports}});
//# sourceMappingURL=17.f97f1881229b14de85d5.js.map